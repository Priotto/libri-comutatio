<div class="mt-1">
  <h1>Show da Book</h1>
  <%= @book.title %>
  <%= @book.author %>
  <%= @book.description %>
  <%= @book.user.firstname %>
  <% if @reputation == 0 %>
    <p>This user is new</p>
  <% else %>
    <%= @reputation %>
  <% end %>

  <% if current_user == @book.user %>
    <%= link_to "Edit Book", edit_book_path(@book), class: "btn btn-primary btn-sm" %>
    <%= link_to "Browse books to trade", books_path, class: "btn btn-primary btn-sm" %>
    <%= link_to "Delete", book_path(@book), :method => :delete, data: {:confirm => "You sure?" , :turbo_method => :delete, :turbo => true}, class: "btn btn-danger btn-sm" %>
  <% else %>
    <% if current_user.books.empty? %>
      <h3>You don't have books to trade</h3>
    <% else %>
      <%= simple_form_for [@book, @transaction] do |f| %>
        <%= f.association :buyer_book, collection: current_user.books.available, label_method: :title %>
        <%= f.button :submit, class: "btn-primary mb-3" %>
      <% end %>
    <% end %>
  <% end %>
</div>


<div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
